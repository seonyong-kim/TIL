# Deadlocks
## System Model
- System은 resources로 구성된다.
- Resource의 종류오 R1, R2, …, Rm
  - 예: CPU 사이클, 메모리 공간, 입출력 장치
- 각 resource type  Ri는 Wi 개의 instance를 가진다.(resource마다 다르며 자원의 수라고 생각하면 된다)
- 각 process는 resource를 다음과 같은 순서로 사용한다:
  - 요청(request)
  - 사용(use)
  - 해제(release)
 
## Deadlock
- deadlock정의
  - 일련의 processes가 서로 다른 process가 가지고 있는 무언가를 기다리는 상황이다.
  - 모든 프로세스가 대기 중이므로, 아무도 다른 프로세스가 기다리는 것을 제공할 수 없다.
- Deadlock example with semaphores <br>
![image](https://github.com/user-attachments/assets/da4e0288-6e39-4327-8f65-d36ec46e1998)

## Deadlock Characterization
- Deadlock 다음 네 가지 조건이 동시에 만족될 때 발생할 수 있다(무조건 발생은 아니다)
  - Mutual exclusion
    - 한 번에 하나의 프로세스만 자원을 사용할 수 있다.
  - No preemption
    - 할당된 자원은 강제로 빼앗을 수 없다.
  - Hold and wait
    - 적어도 하나의 자원을 보유한 프로세스가 다른 자원을 기다리고 있다.
  - Circular wait
    - 자원을 가진 프로세스들이 서로 다른 자원을 기다리며 원형 형태의 대기 관계를 이룬다.(순환고리가 필요하다)
   
## Deadlock: Resource-Allocation Graph 
- Process <br>
![image](https://github.com/user-attachments/assets/441addfb-023d-4359-8fd9-5706c1421739)
- Resource Type with 4 instances. 즉, instance개수 <br>
![image](https://github.com/user-attachments/assets/ce2e8d41-8b99-45ed-9311-9c860c95794f)
- Pi requests instance of Rj. resource를 원한는 상태 <br>
![image](https://github.com/user-attachments/assets/76ddf40f-d906-4f8b-ac85-af76a5483c30)
- Pi is holding an instance of Rj resource 획득 경우 <br>
![image](https://github.com/user-attachments/assets/4262a470-fdce-461f-810c-67447998e0f9)
- Example <br>
![image](https://github.com/user-attachments/assets/2c100a1b-8688-4b79-90a8-674556a6cade)

## Deadlock Handling
- deadlock problem해결 2가지 카테고리
  - 교착 상태 예방/회피 (Deadlock prevention/avoidance)
    - system을 조직하여 교착 상태가 절대 발생하지 않도록 한다.
    - deadlocks을 방지하기 위해 자원 활용 효율이 떨어질 수 있다.
  - 교착 상태 탐지 및 복구 (Deadlock detection and recovery)
    - system이 deadlocked인지 감지하고, 이후 과감한 조치를 취한다.
    - resources을 해제하기 위해 하나 이상의 processes를 종료해야 한다.

# Deadlock Prevention
## 
